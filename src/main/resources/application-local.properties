# ============================================
# CONFIGURAÇÕES PARA DESENVOLVIMENTO LOCAL
# Usa mesmas credenciais do PROD mas sem Redis
# ============================================

# Configurações do Servidor
server.port=8080
server.servlet.context-path=/api

# Desabilitar Redis e cache para desenvolvimento local
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration
spring.cache.type=none

# URL do servidor para Swagger/OpenAPI (local)
springdoc.api-server-url=http://localhost:8080/api

# ============================================
# BANCO DE DADOS - Mesmas credenciais do PROD
# ============================================
spring.datasource.url=jdbc:postgresql://aws-1-sa-east-1.pooler.supabase.com:6543/postgres?sslmode=require&prepareThreshold=0
spring.datasource.username=postgres.pririvdtylilyrtfbmmv
spring.datasource.password=nu3ZmC8pChEm82Xi
spring.datasource.driver-class-name=org.postgresql.Driver

# Pool de conexões reduzido para desenvolvimento local
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=UpSaudeHikariPool-Local
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.validation-timeout=10000
# NOTA: Prepared statements configurados via DataSourceConfig.java e na URL do datasource

# Configuração JPA para desenvolvimento
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.tool.schema.halt_on_error=false
spring.jpa.open-in-view=true
# Configurações para gerenciamento de transações
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ============================================
# SUPABASE
# ============================================
supabase.url=https://pririvdtylilyrtfbmmv.supabase.co
supabase.anon-key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InByaXJpdmR0eWxpbHlydGZibW12Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3NDk3OTYsImV4cCI6MjA3OTMyNTc5Nn0.QFu4AzIltRfXba3gg4u_DBuOf-r55KhoCuwbBuO2ULw
supabase.service-role-key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InByaXJpdmR0eWxpbHlydGZibW12Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzc0OTc5NiwiZXhwIjoyMDc5MzI1Nzk2fQ.6VaENvPSOSUTOQ3aRPPre8tGJ8ktme_5CU5hravHdsU

# ============================================
# SWAGGER/OpenAPI
# ============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# ============================================
# JACKSON
# ============================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# ============================================
# ACTUATOR (simplificado para local)
# ============================================
management.endpoint.health.group.liveness.include=ping
management.endpoint.health.group.readiness.include=db
management.endpoint.health.show-details=always
management.endpoint.health.timeout=10000ms
management.health.redis.enabled=false

# ============================================
# Configurações do Spring Boot Admin (Local)
# ============================================
# URL do servidor Spring Boot Admin para desenvolvimento local
spring.boot.admin.client.url=${SPRING_BOOT_ADMIN_URL:http://localhost:9090}
# URL base da aplicação para o Admin Server acessar os endpoints
spring.boot.admin.client.instance.service-base-url=http://localhost:8080

# ============================================
# LOGS (mais verboso para desenvolvimento)
# ============================================
# Logs detalhados para debug local
logging.level.root=INFO
logging.level.com.upsaude=DEBUG
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.zaxxer.hikari=INFO
