# ============================================
# PROD - ACTUATOR / OBSERVABILIDADE
# ============================================

# Health check do banco de dados habilitado em prod
management.health.db.enabled=true
# Health check do Redis não bloqueia startup se não disponível
# IMPORTANTE: Redis não é crítico - aplicação funciona sem cache
management.health.redis.enabled=true
management.health.redis.timeout=30000ms
# Health check groups para endpoints mais leves
# Health principal não depende do banco para evitar conexões extras
management.endpoint.health.group.default.include=ping
# Liveness: apenas verifica se a aplicação está rodando (ping)
# Readiness: verifica se está pronto para receber tráfego (db apenas)
management.endpoint.health.group.liveness.include=ping
management.endpoint.health.group.readiness.include=db
# Redis não está no readiness para não bloquear startup
# Timeout geral do health check endpoint (aumentado para produção)
management.endpoint.health.timeout=50000ms
# Health check mais rápido em produção - sem detalhes
management.endpoint.health.show-details=never
# Base path do actuator (sem /api)
management.endpoints.web.base-path=/actuator
# Desativa métricas JDBC para evitar conexões extras
# NOTA: Todas as outras métricas (HTTP, JVM, Cache, customizadas) continuam funcionando normalmente
management.metrics.jdbc.datasource.enabled=false
# Garante que métricas HTTP, JVM e cache continuem habilitadas
management.metrics.jvm.enabled=true
management.metrics.web.server.auto-time-requests=true
management.metrics.cache.enabled=true

